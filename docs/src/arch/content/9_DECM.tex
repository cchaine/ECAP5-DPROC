\section{Decode Module}

  \subsection{Interface}

    \begin{content}
        The decode module implements TBC. The signals are described in table \ref{tab:decm-interface}. 
      \end{content}

    \input{arch/tables/9_decm-interface}

  \subsection{Specification}

  \subsubsection{Input interface}

  % Instr imm

  % Instr rd

  \subsubsection{Execute interface}

  \paragraph{LUI}

    \req{D\_DECM\_LUI\_01}{
        When the decoded instruction is \texttt{LUI}, the module shall request the execute module to perform the sum of \texttt{pc\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass and with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

  \paragraph{AUIPC}

    \req{D\_DECM\_AUIPC\_01}{
        When the decoded instruction is \texttt{AUIPC}, the module shall request the execute module to perform the ADD operation with \texttt{pc\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass and with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

  \paragraph{JAL}

    \req{D\_DECM\_JAL\_01}{
        When the decoded instruction is \texttt{JAL}, the module shall request the execute module to perform the ADD operation with \texttt{pc\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, with an unconditional branch, with load-store bypass and with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

  \paragraph{JALR}

    \req{D\_DECM\_JALR\_01}{
        When the decoded instruction is \texttt{JALR}, the module shall request the execute module to perform the ADD operation with the register value pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, with an unconditional branch, with load-store bypass and with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

  \paragraph{BRANCH}

    \req{D\_DECM\_BEQ\_01}{
        When the decoded instruction is \texttt{BEQ}, the module shall request the execute module to perform a BEQ branch with both the values of the registers pointed by \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, to the offset given by the \texttt{imm} value encoded in \texttt{instr\_i}, with load-store bypass and no register write.
      }

    \req{D\_DECM\_BNE\_01}{
        When the decoded instruction is \texttt{BNE}, the module shall request the execute module to perform a BNE branch with both the values of the registers pointed by \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, to the offset given by the \texttt{imm} value encoded in \texttt{instr\_i}, with load-store bypass and no register write.
      }

    \req{D\_DECM\_BLT\_01}{
        When the decoded instruction is \texttt{BLT}, the module shall request the execute module to perform a BLT branch with both the values of the registers pointed by \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, to the offset given by the \texttt{imm} value encoded in \texttt{instr\_i}, with load-store bypass and no register write.
      }

    \req{D\_DECM\_BGE\_01}{
        When the decoded instruction is \texttt{BGE}, the module shall request the execute module to perform a BGE branch with both the values of the registers pointed by \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, to the offset given by the \texttt{imm} value encoded in \texttt{instr\_i}, with load-store bypass and no register write.
      }

    \req{D\_DECM\_BLTU\_01}{
        When the decoded instruction is \texttt{BLTU}, the module shall request the execute module to perform a BLTU branch with both the values of the registers pointed by \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, to the offset given by the \texttt{imm} value encoded in \texttt{instr\_i}, with load-store bypass and no register write.
      }

    \req{D\_DECM\_BGEU\_01}{
        When the decoded instruction is \texttt{BGEU}, the module shall request the execute module to perform a BGEU branch with both the values of the registers pointed by \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, to the offset given by the \texttt{imm} value encoded in \texttt{instr\_i}, with load-store bypass and no register write.
      }

  \paragraph{LOAD}

    \req{D\_DECM\_LB\_01}{
        When the decoded instruction is \texttt{LB}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a one-byte signed load, with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

    \req{D\_DECM\_LBU\_01}{
        When the decoded instruction is \texttt{LBU}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a one-byte unsigned load, with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

    \req{D\_DECM\_LH\_01}{
        When the decoded instruction is \texttt{LH}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a two-byte signed load, with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

    \req{D\_DECM\_LHU\_01}{
        When the decoded instruction is \texttt{LH}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a two-byte unsigned load, with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

    \req{D\_DECM\_LW\_01}{
        When the decoded instruction is \texttt{LH}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a four-byte load, with a register write to the register pointed by the \texttt{rd} field in \texttt{instr\_i}.
      }

  \paragraph{STORE}

    \req{D\_DECM\_SB\_01}{
        When the decoded instruction is \texttt{SB}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a one-byte write of the value of the register pointed by the \texttt{rs2} field of \texttt{instr\_i}, no register write.
      }

    \req{D\_DECM\_SH\_01}{
        When the decoded instruction is \texttt{SH}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a two-byte write of the value of the register pointed by the \texttt{rs2} field of \texttt{instr\_i}, no register write.
      }

    \req{D\_DECM\_SW\_01}{
        When the decoded instruction is \texttt{SW}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with a four-byte write of the value of the register pointed by the \texttt{rs2} field of \texttt{instr\_i}, no register write.
      }

  \paragraph{OP\_IMM}

    \req{D\_DECM\_ADDI\_01}{
        When the decoded instruction is \texttt{ADDI}, the module shall request the execute module to perform the ADD operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SLTI\_01}{
        When the decoded instruction is \texttt{SLTI}, the module shall request the execute module to perform the SLT operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SLTIU\_01}{
        When the decoded instruction is \texttt{SLTIU}, the module shall request the execute module to perform the SLTU operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_XORI\_01}{
        When the decoded instruction is \texttt{XORI}, the module shall request the execute module to perform the XOR operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_ORI\_01}{
        When the decoded instruction is \texttt{ORI}, the module shall request the execute module to perform the OR operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_ANDI\_01}{
        When the decoded instruction is \texttt{ANDI}, the module shall request the execute module to perform the AND operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SLLI\_01}{
        When the decoded instruction is \texttt{SLLI}, the module shall request the execute module to perform the left SHIFT operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SRLI\_01}{
        When the decoded instruction is \texttt{SRLI}, the module shall request the execute module to perform the right unsigned SHIFT operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SRAI\_01}{
        When the decoded instruction is \texttt{SRAI}, the module shall request the execute module to perform the right signed SHIFT operation with the value of the register pointed by the \texttt{rs1} field of \texttt{instr\_i} and the \texttt{imm} value encoded in \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

  \paragraph{OP}

    \req{D\_DECM\_ADD\_01}{
        When the decoded instruction is \texttt{ADD}, the module shall request the execute module to perform the ADD operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SUB\_01}{
        When the decoded instruction is \texttt{SUB}, the module shall request the execute module to perform the SUB operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SLT\_01}{
        When the decoded instruction is \texttt{SLT}, the module shall request the execute module to perform the SLT operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SLTU\_01}{
        When the decoded instruction is \texttt{SLTU}, the module shall request the execute module to perform the SLTU operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_XOR\_01}{
        When the decoded instruction is \texttt{XOR}, the module shall request the execute module to perform the XOR operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_OR\_01}{
        When the decoded instruction is \texttt{OR}, the module shall request the execute module to perform the OR operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_AND\_01}{
        When the decoded instruction is \texttt{AND}, the module shall request the execute module to perform the AND operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SLL\_01}{
        When the decoded instruction is \texttt{SLL}, the module shall request the execute module to perform the left SHIFT operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SRL\_01}{
        When the decoded instruction is \texttt{SRL}, the module shall request the execute module to perform the right unsigned SHIFT operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

    \req{D\_DECM\_SRA\_01}{
        When the decoded instruction is \texttt{SRL}, the module shall request the execute module to perform the right signed SHIFT operation with both value of the registers pointed by the \texttt{rs1} and \texttt{rs2} fields of \texttt{instr\_i}, no branch, with load-store bypass, with a register write to the register pointed by the \texttt{rd} field of \texttt{instr\_i}.
      }

  \subsubsection{Interface protocol}

  % ALU request

  % Branch request

  % Load-Store bypass

  % Register write

\newpage
